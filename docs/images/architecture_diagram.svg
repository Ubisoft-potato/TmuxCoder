<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Styles -->
  <style>
    .box { fill: #f9f9f9; stroke: #333; stroke-width: 2; rx: 5; ry: 5; }
    .group-box { fill: #eef; stroke: #666; stroke-width: 1; stroke-dasharray: 5,5; rx: 10; ry: 10; }
    .text { font-family: sans-serif; font-size: 14px; fill: #333; text-anchor: middle; }
    .label { font-family: sans-serif; font-size: 12px; fill: #666; text-anchor: middle; background-color: white; }
    .path { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
  </style>

  <!-- User -->
  <rect x="350" y="20" width="100" height="50" class="box" />
  <text x="400" y="50" class="text">User</text>

  <!-- Client Side Group -->
  <rect x="150" y="100" width="500" height="200" class="group-box" />
  <text x="400" y="120" class="text" style="font-weight: bold;">Client Side (OpenCode)</text>

  <!-- OpenCode Core -->
  <rect x="200" y="150" width="140" height="60" class="box" />
  <text x="270" y="185" class="text">OpenCode Core</text>

  <!-- Plugin -->
  <rect x="460" y="150" width="140" height="60" class="box" />
  <text x="530" y="185" class="text">Prompt Proxy Plugin</text>

  <!-- Server Side Group -->
  <rect x="150" y="350" width="500" height="200" class="group-box" />
  <text x="400" y="370" class="text" style="font-weight: bold;">Server Side</text>

  <!-- Proxy Service -->
  <rect x="330" y="400" width="140" height="60" class="box" />
  <text x="400" y="435" class="text">Proxy Service</text>

  <!-- Prompt Store -->
  <rect x="200" y="500" width="120" height="40" class="box" />
  <text x="260" y="525" class="text">Prompt Store</text>

  <!-- Audit Log -->
  <rect x="480" y="500" width="120" height="40" class="box" />
  <text x="540" y="525" class="text">Audit Log</text>

  <!-- Connections -->
  <!-- User -> OpenCode -->
  <path d="M 400 70 L 400 100 L 270 100 L 270 150" class="path" />
  
  <!-- OpenCode -> Plugin (Load) -->
  <path d="M 340 180 L 460 180" class="path" />
  <text x="400" y="175" class="label">Load / Hooks</text>

  <!-- Plugin -> Service (HTTP) -->
  <path d="M 530 210 L 530 300 L 400 300 L 400 400" class="path" />
  <text x="480" y="280" class="label">HTTP Request</text>

  <!-- Service -> Store -->
  <path d="M 360 460 L 290 500" class="path" />
  
  <!-- Service -> Log -->
  <path d="M 440 460 L 510 500" class="path" />

</svg>
